{% extends "navbar.html" %}

{% block title %}Home{% endblock %}

{% block content %}
<!-- Verifica si el objeto user fue pasado (siempre debería ser true aquí) -->

<article class="content-2">
{% if user %}
<h1 style="color: #10B981;">¡Bienvenido(a), {{ user.fname }}!</h1>
<p class="message">Has iniciado sesión exitosamente. Esta es tu página de inicio protegida.</p>
{% else %}
<h1>Bienvenido</h1>
<p class="message" >Contenido principal de la aplicación.</p>
{% endif %}

<p>Utiliza el navbar superior para navegar a tu perfil o cerrar sesión.</p>
</article>

<main class="home-container">

  <!--Productos-->
  <section class="category">
    <h2 linkrel="/Producto">Producto</h2>
    <div id="carousel-producto" class="splide" aria-label="Carrusel de productos">
      <div class="splide__track">
        <ul class="splide__list">
         
            {% for p in productos %}
            <li class="splide__slide card">
              <img src="{{ p.ImagenURL }}" alt="{{ p.Titulo }}">
              <div class="info">
                <h3>{{ p.Titulo }}</h3>
                <p>${{ p.Precio }} MXN</p>
              </div>
              <a href="/Producto"><button class="play-btn">▶</button></a>
            </li>
            {% endfor %}

        </ul>
      </div>
    </div>
  </section>

  <!--Servicios -->
  <section class="category">
    <h2>Servicio</h2>
    <div id="carousel-servicio" class="splide" aria-label="Carrusel de servicios">
      <div class="splide__track">
        <ul class="splide__list">
          {% for s in servicios %}
          <li class="splide__slide card">
            <img src="{{ s.ImagenURL }}" alt="{{ s.Titulo }}">
            <div class="info">
              <h3>{{ s.Titulo }}</h3>
              <p>${{ s.Precio }} MXN</p>
            </div>
            <a href="/Servicio"><button class="play-btn">▶</button></a>
          </li>
          {% endfor %}
        </ul>
      </div>
    </div>
  </section>

  <!--Comida -->
  <section class="category">
    <h2>Comida</h2>
    <div id="carousel-comida" class="splide" aria-label="Carrusel de comida">
      <div class="splide__track">
        <ul class="splide__list">
          {% for c in comidas %}
          <li class="splide__slide card">
            <img src="{{ c.ImagenURL }}" alt="{{ c.Titulo }}">
            <div class="info">
              <h3>{{ c.Titulo }}</h3>
              <p>${{ c.Precio }} MXN</p>
            </div>
            <a href="/Comida"><button class="play-btn">▶</button></a>
          </li>
          {% endfor %}
        </ul>
      </div>
    </div>
  </section>

  <!--Descripción -->
  <section class="about">
    <p>
      Somos una plataforma web creada para la comunidad universitaria de los campus IADA e IIT de la UACJ, con el objetivo de apoyar la economía estudiantil mediante un espacio seguro, organizado y exclusivo para comprar y vender productos o servicios entre alumnos y docentes.
    </p>
  </section>

  <!--Contacto -->
  <footer class="footer">
    <h2>Contáctanos</h2>
    <div class="columns">
      <div><p>Lorem ipsum dolor sit amet.</p></div>
      <div><p>Lorem ipsum dolor sit amet.</p></div>
      <div><p>Lorem ipsum dolor sit amet.</p></div>
    </div>
  </footer>

</main>
{% endblock %}

{% block extra_js %}
<script>
  document.addEventListener('DOMContentLoaded', function () {
    const settings = {
      type: 'loop',
      perPage: 3,
      perMove: 1,
      gap: '1rem',
      pagination: false,
      arrows: true,
      breakpoints: {
        768: { perPage: 2 },
        480: { perPage: 1 },
      }
    };
    new Splide('#carousel-producto', settings).mount();
    new Splide('#carousel-servicio', settings).mount();
    new Splide('#carousel-comida', settings).mount();
  });
</script>
{% endblock %}

